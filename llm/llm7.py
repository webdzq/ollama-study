import ollama
def ollama_image_caption(msg):
    client = ollama.Client(host='http://localhost:11434')
    # 设置提示语
    prompt_v = msg or "hello world"
    response = client.generate(
        model='llava', prompt=prompt_v)
    return response

# 调用
# 指令内容，使用 ``` 来分隔指令和待总结的内容
# 示例：产品说明书
fact_sheet_chair = """
概述

    美丽的中世纪风格办公家具系列的一部分，包括文件柜、办公桌、书柜、会议桌等。
    多种外壳颜色和底座涂层可选。
    可选塑料前后靠背装饰（SWC-100）或10种面料和6种皮革的全面装饰（SWC-110）。
    底座涂层选项为：不锈钢、哑光黑色、光泽白色或铬。
    椅子可带或不带扶手。
    适用于家庭或商业场所。
    符合合同使用资格。

结构

    五个轮子的塑料涂层铝底座。
    气动椅子调节，方便升降。

尺寸

    宽度53厘米|20.87英寸
    深度51厘米|20.08英寸
    高度80厘米|31.50英寸
    座椅高度44厘米|17.32英寸
    座椅深度41厘米|16.14英寸

选项

    软地板或硬地板滚轮选项。
    两种座椅泡沫密度可选：中等（1.8磅/立方英尺）或高（2.8磅/立方英尺）。
    无扶手或8个位置PU扶手。

材料
外壳底座滑动件

    改性尼龙PA6/PA66涂层的铸铝。
    外壳厚度：10毫米。
    座椅
    HD36泡沫

原产国

    意大利
"""
# Prompt ：基于说明书创建营销描述
prompt = f"""
您的任务是帮助营销团队基于技术说明书创建一个产品的营销描述。

根据```标记的技术说明书中提供的信息，编写一个产品描述。

技术说明: ```{fact_sheet_chair}```
"""
caption = ollama_image_caption(prompt)

print(caption)

'''
{
    'model': 'llava',
    'created_at': '2024-10-31T10:51:39.120906Z',
    'response': ' 介绍：我们的产品是一部中世纪风格的办公家具系列，包括文件柜、办公桌、书柜和会议桌等。该系列以美丽的外观和实用性为核心特点，可选多种颜色和底座涂层装饰。本文将详细介绍这些产品的特点和优势。\n\n外观：我们的产品采用了中世纪风格的设计，具有传统的魅力。其外壳底座滑动件是由改性尼龙PA6/PA66涂层铸铝制作，而且可选多种颜色和底座涂层装饰，使得它们更具个性化的表现。\n\n实用性：我们的产品采用了五个轮子的塑料涂层铝底座，可调节高度，方便升降。每只椅子提供两种座椅泡沫密度选项，中等或高，以满足不同用户的需求。此外，我们还提供了软地板或硬地板滚轮选项和8个位置PU扶手。\n\n材料：我们的产品使用了尼龙PA6/PA66涂层铸铝制成，具有良好的耐磨损耗性能。外壳厚度为10毫米，可以保护其内部组件。\n\n使用场所：我们的产品非常适合家庭和商业场所。它们的美丽设计与实用性都是优势之一，能够让人们在工作或休息中感受到舒适和高效。\n\n总结：我们的产品以美丽的外观和实用性为核心特点，提供了多种颜色和底座涂层装饰选项，使得它们更具个性化的表现。同时，我们还采取了五个轮子的塑料涂层铝底座，以满足不同用户的需求。无论是家庭还是商业场所，这些产品都能够带来更好的工作和休息体验。 ',
    'done': True,
    'done_reason': 'stop',
    'context': [733, 16289, 28793, 28705, 13, 29689, 28914, 29454, 29224, 28971, 31186, 30278, 30782, 30286, 30756,
        30031, 29691, 29160, 30021, 30485, 29616, 29381, 30117, 29349, 29193, 28518, 29818, 29346, 28914, 30782,
        30286, 29697, 29769, 28944, 13, 13, 29521, 29020, 13940, 28832, 29144, 29442, 28914, 30021, 30485, 29616,
        29381, 30117, 28991, 29279, 29954, 28914, 29080, 29069, 28924, 29402, 29503, 28518, 29818, 29346, 29697,
        29769, 28944, 13, 13, 30021, 30485, 29616, 29381, 28747, 8789, 13, 31137, 29769, 13, 13, 260, 29817, 31625,
        28914, 28991, 30050, 31466, 30206, 29293, 31298, 29443, 29490, 29737, 29401, 29150, 28914, 28969, 29237,
        29062, 28924, 29333, 30574, 29019, 29011, 233, 162, 159, 29041, 31298, 29443, 233, 164, 143, 29041, 30117,
        233, 162, 159, 29041, 29179, 30361, 233, 164, 143, 29414, 28944, 13, 260, 29292, 29824, 29638, 232, 166,
        182, 30327, 29395, 29131, 30537, 30635, 233, 185, 133, 29990, 29052, 29216, 28944, 13, 260, 29052, 29216,
        232, 164, 148, 29733, 29087, 29120, 236, 160, 163, 30402, 29722, 31915, 29186, 9854, 28743, 28733, 28740,
        28734, 28734, 29185, 29355, 28740, 28734, 29824, 29181, 29733, 29131, 28784, 29824, 31279, 236, 160, 172,
        28914, 29374, 29181, 29722, 31915, 29186, 9854, 28743, 28733, 28740, 28740, 28734, 29185, 28944, 13, 260,
        30537, 30635, 233, 185, 133, 29990, 29216, 29541, 29003, 28994, 28988, 236, 151, 139, 236, 149, 165, 29041,
        232, 150, 148, 29762, 30258, 29395, 29041, 29762, 233, 182, 192, 29917, 29395, 29355, 236, 150, 175, 28944,
        13, 260, 233, 167, 136, 29169, 29052, 30197, 29355, 28988, 30197, 233, 140, 185, 29427, 28944, 13, 260,
        30640, 28963, 29160, 29490, 31926, 29355, 29397, 29703, 30082, 29163, 28944, 13, 260, 29252, 29234, 29234,
        29338, 29154, 28963, 29542, 29293, 28944, 13, 13, 29218, 29612, 13, 13, 260, 30108, 28995, 30908, 29169,
        28914, 232, 164, 148, 29733, 233, 185, 133, 29990, 236, 150, 160, 30537, 30635, 28944, 13, 260, 30627,
        29129, 233, 167, 136, 29169, 29231, 29312, 28924, 29082, 30468, 30401, 30852, 28944, 13, 13, 31076, 31222,
        13, 13, 260, 30236, 29184, 28782, 28770, 232, 145, 155, 30752, 28766, 28750, 28734, 28723, 28783, 28787,
        30193, 31222, 13, 260, 30330, 29184, 28782, 28740, 232, 145, 155, 30752, 28766, 28750, 28734, 28723, 28734,
        28783, 30193, 31222, 13, 260, 29366, 29184, 28783, 28734, 232, 145, 155, 30752, 28766, 28770, 28740, 28723,
        28782, 28734, 30193, 31222, 13, 260, 30635, 233, 167, 136, 29366, 29184, 28781, 28781, 232, 145, 155, 30752,
        28766, 28740, 28787, 28723, 28770, 28750, 30193, 31222, 13, 260, 30635, 233, 167, 136, 30330, 29184, 28781,
        28740, 232, 145, 155, 30752, 28766, 28740, 28784, 28723, 28740, 28781, 30193, 31222, 13, 13, 29216, 29541,
        13, 13, 260, 30769, 29146, 29561, 29355, 31483, 29146, 29561, 30787, 30908, 29216, 29541, 28944, 13, 260,
        29745, 29824, 30635, 233, 167, 136, 233, 182, 164, 233, 181, 174, 29385, 29184, 29052, 29216, 28994, 28991,
        29414, 29186, 28740, 28723, 28783, 234, 166, 136, 28748, 29831, 29082, 30193, 31076, 29185, 29355, 29366,
        29186, 28750, 28723, 28783, 234, 166, 136, 28748, 29831, 29082, 30193, 31076, 29185, 28944, 13, 260, 29375,
        233, 140, 185, 29427, 29355, 28783, 28995, 29147, 29021, 7903, 233, 140, 185, 29427, 28944, 13, 13, 31239,
        29733, 13, 29638, 232, 166, 182, 30537, 30635, 31062, 29129, 29011, 13, 13, 260, 29220, 29261, 30854, 30404,
        7824, 28784, 28748, 7824, 28784, 28784, 233, 185, 133, 29990, 28914, 236, 150, 187, 236, 150, 160, 28944,
        13, 260, 29638, 232, 166, 182, 232, 145, 157, 29184, 28994, 28740, 28734, 31331, 30752, 28944, 13, 260,
        30635, 233, 167, 136, 13, 2287, 15051, 28770, 28784, 233, 182, 164, 233, 181, 174, 13, 13, 29493, 29818,
        29453, 13, 13, 260, 29462, 29050, 29819, 13, 13940, 28832, 13, 733, 28748, 16289, 28793, 28705, 30739,
        31457, 28994, 29242, 29550, 28914, 29818, 29346, 28971, 28969, 29237, 28991, 30050, 31466, 30206, 29293,
        28914, 31298, 29443, 29490, 29737, 29401, 29150, 28924, 29333, 30574, 29019, 29011, 233, 162, 159, 29041,
        31298, 29443, 233, 164, 143, 29041, 30117, 233, 162, 159, 29131, 29179, 30361, 233, 164, 143, 29414, 28944,
        29350, 29401, 29150, 29074, 29817, 31625, 28914, 29638, 30740, 29131, 29247, 28963, 29261, 29003, 30080,
        29574, 29631, 29085, 28924, 29052, 29216, 29292, 29824, 30327, 29395, 29131, 30537, 30635, 233, 185, 133,
        29990, 29722, 31915, 28944, 29119, 29019, 29248, 29852, 30044, 30739, 31457, 29176, 29904, 29818, 29346,
        28914, 29631, 29085, 29131, 30077, 31728, 28944, 13, 13, 29638, 30740, 28994, 29242, 29550, 28914, 29818,
        29346, 30398, 28963, 29105, 28991, 30050, 31466, 30206, 29293, 28914, 29081, 29382, 28924, 29737, 28998,
        29359, 29531, 28914, 236, 176, 136, 29588, 28944, 29450, 29638, 232, 166, 182, 30537, 30635, 31062, 29129,
        29011, 28971, 29590, 29220, 29261, 30854, 30404, 7824, 28784, 28748, 7824, 28784, 28784, 233, 185, 133,
        29990, 236, 150, 187, 236, 150, 160, 29251, 29089, 28924, 29746, 29958, 29052, 29216, 29292, 29824, 30327,
        29395, 29131, 30537, 30635, 233, 185, 133, 29990, 29722, 31915, 28924, 29154, 29291, 29928, 29550, 29250,
        29737, 28995, 29261, 29192, 28914, 29024, 29419, 28944, 13, 13, 29247, 28963, 29261, 28994, 29242, 29550,
        28914, 29818, 29346, 30398, 28963, 29105, 30108, 28995, 30908, 29169, 28914, 232, 164, 148, 29733, 233, 185,
        133, 29990, 236, 150, 160, 30537, 30635, 28924, 29052, 29231, 29312, 29366, 29184, 28924, 29082, 30468,
        30401, 30852, 28944, 29513, 29405, 233, 167, 136, 29169, 29279, 29954, 29745, 29824, 30635, 233, 167, 136,
        233, 182, 164, 233, 181, 174, 29385, 29184, 29216, 29541, 28924, 28991, 29414, 29355, 29366, 28924, 29074,
        30493, 30303, 28988, 29338, 28963, 29106, 28914, 29259, 29243, 28944, 29320, 29638, 28924, 29242, 29550,
        29751, 29279, 29954, 29105, 30769, 29146, 29561, 29355, 31483, 29146, 29561, 30787, 30908, 29216, 29541,
        29131, 28783, 28995, 29147, 29021, 7903, 233, 140, 185, 29427, 28944, 13, 13, 31239, 29733, 28994, 29242,
        29550, 28914, 29818, 29346, 29154, 28963, 29105, 30854, 30404, 7824, 28784, 28748, 7824, 28784, 28784, 233,
        185, 133, 29990, 236, 150, 187, 236, 150, 160, 29251, 29025, 28924, 29737, 28998, 30868, 29530, 28914, 235,
        131, 147, 234, 166, 171, 31867, 31188, 29261, 29084, 28944, 29638, 232, 166, 182, 232, 145, 157, 29184,
        29003, 28740, 28734, 31331, 30752, 28924, 29052, 29074, 29321, 30641, 29450, 29188, 29237, 29205, 29011,
        28944, 13, 13, 29154, 28963, 30082, 29163, 28994, 29242, 29550, 28914, 29818, 29346, 29764, 29408, 30640,
        29234, 29490, 31926, 29131, 29397, 29703, 30082, 29163, 28944, 29928, 29550, 28914, 29817, 31625, 29081,
        29382, 29551, 29247, 28963, 29261, 29460, 28971, 30077, 31728, 29332, 28969, 28924, 29084, 31194, 30447,
        29086, 29550, 29010, 29487, 29089, 29355, 31381, 29069, 28991, 30266, 30154, 29036, 235, 139, 149, 30640,
        29131, 29366, 29532, 28944, 13, 13, 29758, 29218, 28994, 29242, 29550, 28914, 29818, 29346, 29074, 29817,
        31625, 28914, 29638, 30740, 29131, 29247, 28963, 29261, 29003, 30080, 29574, 29631, 29085, 28924, 29279,
        29954, 29105, 29292, 29824, 30327, 29395, 29131, 30537, 30635, 233, 185, 133, 29990, 29722, 31915, 29216,
        29541, 28924, 29154, 29291, 29928, 29550, 29250, 29737, 28995, 29261, 29192, 28914, 29024, 29419, 28944,
        29338, 29007, 28924, 29242, 29550, 29751, 30398, 29012, 29105, 30108, 28995, 30908, 29169, 28914, 232, 164,
        148, 29733, 233, 185, 133, 29990, 236, 150, 160, 30537, 30635, 28924, 29074, 30493, 30303, 28988, 29338,
        28963, 29106, 28914, 29259, 29243, 28944, 29375, 30144, 28971, 29490, 31926, 29751, 28971, 29397, 29703,
        30082, 29163, 28924, 29176, 29904, 29818, 29346, 29460, 29084, 31194, 30197, 29263, 29250, 29530, 28914,
        29487, 29089, 29131, 31381, 29069, 29337, 29502, 28944, 28705],
    'total_duration': 345640404864,
    'load_duration': 8598517025,
    'prompt_eval_count': 595,
    'prompt_eval_duration': 78746557000,
    'eval_count': 588,
    'eval_duration': 258276170000
}

'''