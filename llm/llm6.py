import ollama
def ollama_image_caption(msg):
    client = ollama.Client(host='http://localhost:11434')
    # 设置提示语
    prompt_v = msg or "hello world"
    response = client.generate(
        model='llava', prompt=prompt_v)
    return response

# 调用
# 指令内容，使用 ``` 来分隔指令和待总结的内容
prompt = f"""
请判断学生的解决方案是否正确，请通过如下步骤解决这个问题：

步骤：

    首先，自己解决问题。
    然后将您的解决方案与学生的解决方案进行比较，对比计算得到的总费用与学生计算的总费用是否一致，并评估学生的解决方案是否正确。
    在自己完成问题之前，请勿决定学生的解决方案是否正确。

使用以下格式：

    问题：问题文本
    学生的解决方案：学生的解决方案文本
    实际解决方案和步骤：实际解决方案和步骤文本
    学生计算的总费用：学生计算得到的总费用
    实际计算的总费用：实际计算出的总费用
    学生计算的费用和实际计算的费用是否相同：是或否
    学生的解决方案和实际解决方案是否相同：是或否
    学生的成绩：正确或不正确

问题：

    我正在建造一个太阳能发电站，需要帮助计算财务。 
    - 土地费用为每平方英尺100美元
    - 我可以以每平方英尺250美元的价格购买太阳能电池板
    - 我已经谈判好了维护合同，每年需要支付固定的10万美元，并额外支付每平方英尺10美元;

    作为平方英尺数的函数，首年运营的总费用是多少。

学生的解决方案：

    设x为发电站的大小，单位为平方英尺。
    费用：
    1. 土地费用：100x美元
    2. 太阳能电池板费用：250x美元
    3. 维护费用：100,000+100x=10万美元+10x美元
    总费用：100x美元+250x美元+10万美元+100x美元=450x+10万美元

实际解决方案和步骤：
"""
caption = ollama_image_caption(prompt)

print(caption)

'''
{
    'model': 'llava',
    'created_at': '2024-10-31T09:29:49.026078Z',
    'response': ' 问题：我正在建造一个太阳能发电站，需要帮助计算财务。- 土地费用为每平方英尺100美元- 我可以以每平方英尺250美元的价格购买太阳能电池板- 我已经谈判好了维护合同，每年需要支付固定的10万美元，并额外支持每平方英尺10美元。\n\n学生的解决方案：\n设x为发电站的大小，单位为平方英尺。\n费用：\n1. 土地费用：100x美元\n2. 太阳能电池板费用：250x美元\n3. 维护费用：100,000+100x=10万美元+10x美元\n总费用：100x美元+250x美元+10万美元+100x美元=450x+10万美元\n\n实际解决方案和步骤：\n首先，我们需要计算出发电站的大小。这可以根据我们的实际需求来确定。假设我们需要的太阳能发电站的大小为x平方英尺，那么我们需要购买x个太阳能电池板，总费用为250\\* x美元。\n\n接下来，我们需要计算维护费用。这可以根据维护合同的条款确定。维护费用为每年10万美元和每平方英尺10美元。\n\n最后，我们需要计算土地费用。这可以根据建筑规划或者其他相关信息来确定。例如，如果我们在一个美国州里，那么土地费用可能会因为地理位置而有所不同。\n\n将这三个费用加起来，就是发电站的总费用了。要计算出实际解决方案，需要使用上述步骤。\n\n学生计算的总费用：450x+10万美元+100x美元（其中x为发电站的大小）\n实际计算的总费用：根据具体情况和条件来确定。\n\n学生计算的费用和实际计算的费用是否相同：无法确定，需要根据具体情况和条件来进行比较。\n\n学生的解决方案和实际解决方案是否相同：无法确定，需要根据具体情况和条件来进行比较。\n\n学生的成绩：无法确定，需要根据具体情况和条件来评估。 ',
    'done': True,
    'done_reason': 'stop',
    'context': [733, 16289, 28793, 28705, 13, 29067, 29485, 29396, 29500, 29128, 28914, 29386, 30668, 29082, 30002,
        28971, 29140, 29302, 29529, 28924, 29067, 29217, 29202, 29118, 29061, 29783, 236, 173, 167, 29386, 30668,
        29176, 28995, 29562, 29264, 28994, 13, 13, 29783, 236, 173, 167, 28994, 13, 13, 260, 29993, 29596, 28924,
        29159, 29957, 29386, 30668, 29562, 29264, 28944, 13, 260, 29713, 29120, 29248, 29689, 28914, 29386, 30668,
        29082, 30002, 29551, 29500, 29128, 28914, 29386, 30668, 29082, 30002, 29258, 29037, 29605, 30459, 28924,
        29051, 29605, 29382, 29481, 29291, 29036, 28914, 29758, 29919, 28963, 29551, 29500, 29128, 29382, 29481,
        28914, 29758, 29919, 28963, 28971, 29140, 28969, 30176, 28924, 29457, 30252, 231, 191, 179, 29500, 29128,
        28914, 29386, 30668, 29082, 30002, 28971, 29140, 29302, 29529, 28944, 13, 260, 29010, 29159, 29957, 29474,
        29025, 29562, 29264, 29332, 29087, 28924, 29067, 232, 142, 194, 30668, 29018, 29500, 29128, 28914, 29386,
        30668, 29082, 30002, 28971, 29140, 29302, 29529, 28944, 13, 13, 29154, 28963, 29074, 29061, 29293, 29122,
        28994, 13, 13, 260, 29562, 29264, 28994, 29562, 29264, 29019, 29119, 13, 260, 29500, 29128, 28914, 29386,
        30668, 29082, 30002, 28994, 29500, 29128, 28914, 29386, 30668, 29082, 30002, 29019, 29119, 13, 260, 29247,
        30604, 29386, 30668, 29082, 30002, 29131, 29783, 236, 173, 167, 28994, 29247, 30604, 29386, 30668, 29082,
        30002, 29131, 29783, 236, 173, 167, 29019, 29119, 13, 260, 29500, 29128, 29382, 29481, 28914, 29758, 29919,
        28963, 28994, 29500, 29128, 29382, 29481, 29291, 29036, 28914, 29758, 29919, 28963, 13, 260, 29247, 30604,
        29382, 29481, 28914, 29758, 29919, 28963, 28994, 29247, 30604, 29382, 29481, 29065, 28914, 29758, 29919,
        28963, 13, 260, 29500, 29128, 29382, 29481, 28914, 29919, 28963, 29131, 29247, 30604, 29382, 29481, 28914,
        29919, 28963, 28971, 29140, 29367, 29338, 28994, 28971, 29355, 29140, 13, 260, 29500, 29128, 28914, 29386,
        30668, 29082, 30002, 29131, 29247, 30604, 29386, 30668, 29082, 30002, 28971, 29140, 29367, 29338, 28994,
        28971, 29355, 29140, 13, 260, 29500, 29128, 28914, 29025, 234, 190, 172, 28994, 29302, 29529, 29355, 28988,
        29302, 29529, 13, 13, 29562, 29264, 28994, 13, 13, 260, 29242, 29302, 29010, 29193, 29925, 28518, 29975,
        30230, 29084, 29099, 29742, 29992, 28924, 29259, 29059, 31186, 30278, 29382, 29481, 31779, 29224, 28944,
        28705, 13, 2287, 387, 28705, 30790, 29146, 29919, 28963, 29003, 29513, 29549, 29082, 30193, 31076, 28740,
        28734, 28734, 29817, 29352, 13, 2287, 387, 28705, 29242, 29052, 29074, 29074, 29513, 29549, 29082, 30193,
        31076, 28750, 28782, 28734, 29817, 29352, 28914, 29970, 29293, 30207, 30704, 29975, 30230, 29084, 29742,
        30647, 29561, 13, 2287, 387, 28705, 29242, 29235, 29464, 235, 179, 139, 29485, 29530, 29105, 30185, 30641,
        29234, 29338, 28924, 29513, 29356, 29259, 29059, 29428, 29628, 30657, 29018, 28914, 28740, 28734, 30568,
        29817, 29352, 28924, 29457, 29880, 29638, 29428, 29628, 29513, 29549, 29082, 30193, 31076, 28740, 28734,
        29817, 29352, 28745, 13, 13, 260, 29089, 29003, 29549, 29082, 30193, 31076, 28945, 28914, 29297, 28945,
        28924, 29993, 29356, 29798, 30782, 28914, 29758, 29919, 28963, 28971, 29292, 29805, 28944, 13, 13, 29500,
        29128, 28914, 29386, 30668, 29082, 30002, 28994, 13, 13, 260, 29081, 28744, 29003, 29099, 29742, 29992,
        28914, 29050, 29138, 28924, 29113, 29147, 29003, 29549, 29082, 30193, 31076, 28944, 13, 260, 29919, 28963,
        28994, 13, 260, 28740, 28723, 28705, 30790, 29146, 29919, 28963, 28994, 28740, 28734, 28734, 28744, 29817,
        29352, 13, 260, 28750, 28723, 28705, 29975, 30230, 29084, 29742, 30647, 29561, 29919, 28963, 28994, 28750,
        28782, 28734, 28744, 29817, 29352, 13, 260, 28770, 28723, 28705, 30185, 30641, 29919, 28963, 28994, 28740,
        28734, 28734, 28725, 28734, 28734, 28734, 28806, 28740, 28734, 28734, 28744, 28746, 28740, 28734, 30568,
        29817, 29352, 28806, 28740, 28734, 28744, 29817, 29352, 13, 260, 29758, 29919, 28963, 28994, 28740, 28734,
        28734, 28744, 29817, 29352, 28806, 28750, 28782, 28734, 28744, 29817, 29352, 28806, 28740, 28734, 30568,
        29817, 29352, 28806, 28740, 28734, 28734, 28744, 29817, 29352, 28746, 28781, 28782, 28734, 28744, 28806,
        28740, 28734, 30568, 29817, 29352, 13, 13, 29247, 30604, 29386, 30668, 29082, 30002, 29131, 29783, 236, 173,
        167, 28994, 13, 733, 28748, 16289, 28793, 28705, 29562, 29264, 28994, 29242, 29302, 29010, 29193, 29925,
        28518, 29975, 30230, 29084, 29099, 29742, 29992, 28924, 29259, 29059, 31186, 30278, 29382, 29481, 31779,
        29224, 28944, 28733, 28705, 30790, 29146, 29919, 28963, 29003, 29513, 29549, 29082, 30193, 31076, 28740,
        28734, 28734, 29817, 29352, 28733, 28705, 29242, 29052, 29074, 29074, 29513, 29549, 29082, 30193, 31076,
        28750, 28782, 28734, 29817, 29352, 28914, 29970, 29293, 30207, 30704, 29975, 30230, 29084, 29742, 30647,
        29561, 28733, 28705, 29242, 29235, 29464, 235, 179, 139, 29485, 29530, 29105, 30185, 30641, 29234, 29338,
        28924, 29513, 29356, 29259, 29059, 29428, 29628, 30657, 29018, 28914, 28740, 28734, 30568, 29817, 29352,
        28924, 29457, 29880, 29638, 29428, 29569, 29513, 29549, 29082, 30193, 31076, 28740, 28734, 29817, 29352,
        28944, 13, 13, 29500, 29128, 28914, 29386, 30668, 29082, 30002, 28994, 13, 29081, 28744, 29003, 29099,
        29742, 29992, 28914, 29050, 29138, 28924, 29113, 29147, 29003, 29549, 29082, 30193, 31076, 28944, 13, 29919,
        28963, 28994, 13, 28740, 28723, 28705, 30790, 29146, 29919, 28963, 28994, 28740, 28734, 28734, 28744, 29817,
        29352, 13, 28750, 28723, 28705, 29975, 30230, 29084, 29742, 30647, 29561, 29919, 28963, 28994, 28750, 28782,
        28734, 28744, 29817, 29352, 13, 28770, 28723, 28705, 30185, 30641, 29919, 28963, 28994, 28740, 28734, 28734,
        28725, 28734, 28734, 28734, 28806, 28740, 28734, 28734, 28744, 28746, 28740, 28734, 30568, 29817, 29352,
        28806, 28740, 28734, 28744, 29817, 29352, 13, 29758, 29919, 28963, 28994, 28740, 28734, 28734, 28744, 29817,
        29352, 28806, 28750, 28782, 28734, 28744, 29817, 29352, 28806, 28740, 28734, 30568, 29817, 29352, 28806,
        28740, 28734, 28734, 28744, 29817, 29352, 28746, 28781, 28782, 28734, 28744, 28806, 28740, 28734, 30568,
        29817, 29352, 13, 13, 29247, 30604, 29386, 30668, 29082, 30002, 29131, 29783, 236, 173, 167, 28994, 13,
        29993, 29596, 28924, 29242, 29550, 29259, 29059, 29382, 29481, 29065, 29099, 29742, 29992, 28914, 29050,
        29138, 28944, 29176, 29052, 29074, 29521, 29020, 29242, 29550, 28914, 29247, 30604, 29259, 29243, 29263,
        29529, 29018, 28944, 30826, 29081, 29242, 29550, 29259, 29059, 28914, 29975, 30230, 29084, 29099, 29742,
        29992, 28914, 29050, 29138, 29003, 28744, 29549, 29082, 30193, 31076, 28924, 29793, 29797, 29242, 29550,
        29259, 29059, 30207, 30704, 28744, 28995, 29975, 30230, 29084, 29742, 30647, 29561, 28924, 29758, 29919,
        28963, 29003, 28750, 28782, 28734, 28756, 28736, 1318, 29817, 29352, 28944, 13, 13, 29076, 29061, 29263,
        28924, 29242, 29550, 29259, 29059, 29382, 29481, 30185, 30641, 29919, 28963, 28944, 29176, 29052, 29074,
        29521, 29020, 30185, 30641, 29234, 29338, 28914, 29391, 29994, 29529, 29018, 28944, 30185, 30641, 29919,
        28963, 29003, 29513, 29356, 28740, 28734, 30568, 29817, 29352, 29131, 29513, 29549, 29082, 30193, 31076,
        28740, 28734, 29817, 29352, 28944, 13, 13, 29190, 29120, 28924, 29242, 29550, 29259, 29059, 29382, 29481,
        30790, 29146, 29919, 28963, 28944, 29176, 29052, 29074, 29521, 29020, 29193, 234, 176, 148, 29946, 30791,
        29355, 29276, 29450, 29440, 29367, 29229, 29080, 29069, 29263, 29529, 29018, 28944, 29362, 29118, 28924,
        29118, 29098, 29242, 29550, 29010, 28518, 29817, 29453, 29719, 29400, 28924, 29793, 29797, 30790, 29146,
        29919, 28963, 29052, 29084, 29179, 29657, 29003, 29146, 29093, 29147, 29021, 29746, 28998, 29163, 28988,
        29338, 28944, 13, 13, 29248, 29176, 29492, 28995, 29919, 28963, 29058, 29676, 29263, 28924, 29379, 28971,
        29099, 29742, 29992, 28914, 29758, 29919, 28963, 29105, 28944, 29059, 29382, 29481, 29065, 29247, 30604,
        29386, 30668, 29082, 30002, 28924, 29259, 29059, 29154, 28963, 29054, 29769, 29783, 236, 173, 167, 28944,
        13, 13, 29500, 29128, 29382, 29481, 28914, 29758, 29919, 28963, 28994, 28781, 28782, 28734, 28744, 28806,
        28740, 28734, 30568, 29817, 29352, 28806, 28740, 28734, 28734, 28744, 29817, 29352, 29186, 29450, 28991,
        28744, 29003, 29099, 29742, 29992, 28914, 29050, 29138, 29185, 13, 29247, 30604, 29382, 29481, 28914, 29758,
        29919, 28963, 28994, 29521, 29020, 29737, 29337, 29418, 30181, 29131, 29391, 29011, 29263, 29529, 29018,
        28944, 13, 13, 29500, 29128, 29382, 29481, 28914, 29919, 28963, 29131, 29247, 30604, 29382, 29481, 28914,
        29919, 28963, 28971, 29140, 29367, 29338, 28994, 29375, 29095, 29529, 29018, 28924, 29259, 29059, 29521,
        29020, 29737, 29337, 29418, 30181, 29131, 29391, 29011, 29263, 29258, 29037, 29605, 30459, 28944, 13, 13,
        29500, 29128, 28914, 29386, 30668, 29082, 30002, 29131, 29247, 30604, 29386, 30668, 29082, 30002, 28971,
        29140, 29367, 29338, 28994, 29375, 29095, 29529, 29018, 28924, 29259, 29059, 29521, 29020, 29737, 29337,
        29418, 30181, 29131, 29391, 29011, 29263, 29258, 29037, 29605, 30459, 28944, 13, 13, 29500, 29128, 28914,
        29025, 234, 190, 172, 28994, 29375, 29095, 29529, 29018, 28924, 29259, 29059, 29521, 29020, 29737, 29337,
        29418, 30181, 29131, 29391, 29011, 29263, 30252, 231, 191, 179, 28944, 28705],
    'total_duration': 395207235172,
    'load_duration': 12116207,
    'prompt_eval_count': 644,
    'prompt_eval_duration': 101944223000,
    'eval_count': 717,
    'eval_duration': 293237165000
}

'''