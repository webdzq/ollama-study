import ollama
def ollama_image_caption(msg):
    client = ollama.Client(host='http://localhost:11434')
    # 设置提示语
    prompt_v = msg or "hello world"
    response = client.generate(
        model='llava', prompt=prompt_v)
    return response

# 调用
# 指令内容，使用 ``` 来分隔指令和待总结的内容
# 示例：产品说明书
fact_sheet_chair = """
概述

    美丽的中世纪风格办公家具系列的一部分，包括文件柜、办公桌、书柜、会议桌等。
    多种外壳颜色和底座涂层可选。
    可选塑料前后靠背装饰（SWC-100）或10种面料和6种皮革的全面装饰（SWC-110）。
    底座涂层选项为：不锈钢、哑光黑色、光泽白色或铬。
    椅子可带或不带扶手。
    适用于家庭或商业场所。
    符合合同使用资格。

结构

    五个轮子的塑料涂层铝底座。
    气动椅子调节，方便升降。

尺寸

    宽度53厘米|20.87英寸
    深度51厘米|20.08英寸
    高度80厘米|31.50英寸
    座椅高度44厘米|17.32英寸
    座椅深度41厘米|16.14英寸

选项

    软地板或硬地板滚轮选项。
    两种座椅泡沫密度可选：中等（1.8磅/立方英尺）或高（2.8磅/立方英尺）。
    无扶手或8个位置PU扶手。

材料
外壳底座滑动件

    改性尼龙PA6/PA66涂层的铸铝。
    外壳厚度：10毫米。
    座椅
    HD36泡沫

原产国

    意大利
"""
# Prompt ：基于说明书创建营销描述
prompt = f"""
您的任务是帮助营销团队基于技术说明书创建一个产品的零售网站描述。

根据```标记的技术说明书中提供的信息，编写一个产品描述。

该描述面向家具零售商，因此应具有技术性质，并侧重于产品的材料构造。

在描述末尾，包括技术规格中每个7个字符的产品ID。

在描述之后，包括一个表格，提供产品的尺寸。表格应该有两列。第一列包括尺寸的名称。第二列只包括英寸的测量值。

给表格命名为“产品尺寸”。

将所有内容格式化为可用于网站的HTML格式。将描述放在<div>元素中。

技术规格：```{fact_sheet_chair}```
"""
caption = ollama_image_caption(prompt)

print(caption)

'''
{
    'model': 'llava',
    'created_at': '2024-11-01T03:12:30.915976Z',
    'response': ' <div>\n<h2>产品描述</h2>\n<p>我们的中世纪风格办公家具系列是一个非常精致和美观的产品，包括文件柜、办公桌、书柜、会议桌等。这些家具系列采用多种外壳颜色和底座涂层可选，使它们更加灵活适应各种场景。</p>\n<p>我们的产品还支持两种装饰方式：SWC-100（塑料前后靠背装饰）和SWC-110（全面装饰，包括6种皮革和10种面料）。我们提供的底座涂层选项为不锈钢、哑光黑色、光泽白色或铬。</p>\n<p>我们的产品采用五个轮子的塑料涂层和铝底座，可以方便升降调节。选项包括软地板或硬地板滚轮、两种座椅泡沫密度（中等和高）以及无扶手或8个位置PU扶手。</p>\n<p>该产品适用于家庭或商业场所，并符合合同使用资格。</p>\n</div>\n\n<h3>产品尺寸</h3>\n\n<table>\n <tr>\n <th>尺寸名称</th>\n <th>英寸测量值</th>\n </tr>\n <tr>\n <td>宽度</td>\n <td>53厘米|20.87英寸</td>\n </tr>\n <tr>\n <td>深度</td>\n <td>51厘米|20.08英寸</td>\n </tr>\n <tr>\n <td>高度</td>\n <td>80厘米|31.50英寸</td>\n </tr>\n <tr>\n <td>座椅高度</td>\n <td>44厘米|17.32英寸</td>\n </tr>\n <tr>\n <td>座椅深度</td>\n <td>41厘米|16.14英寸</td>\n </tr>\n</table> ',
    'done': True,
    'done_reason': 'stop',
    'context': [733, 16289, 28793, 28705, 13, 29689, 28914, 29454, 29224, 28971, 31186, 30278, 30782, 30286, 30756,
        30031, 29691, 29160, 30021, 30485, 29616, 29381, 30117, 29349, 29193, 28518, 29818, 29346, 28914, 30922,
        30917, 29533, 29992, 29697, 29769, 28944, 13, 13, 29521, 29020, 13940, 28832, 29144, 29442, 28914, 30021,
        30485, 29616, 29381, 30117, 28991, 29279, 29954, 28914, 29080, 29069, 28924, 29402, 29503, 28518, 29818,
        29346, 29697, 29769, 28944, 13, 13, 29350, 29697, 29769, 29181, 29478, 29490, 29737, 30922, 30917, 29397,
        28924, 29657, 29320, 29298, 29737, 28998, 30021, 30485, 29261, 30625, 28924, 29457, 30994, 29249, 29160,
        29818, 29346, 28914, 31239, 29733, 29612, 29925, 28944, 13, 13, 29010, 29697, 29769, 31325, 30473, 28924,
        29333, 30574, 30021, 30485, 29946, 29293, 28991, 29513, 28995, 28787, 28995, 29031, 29252, 28914, 29818,
        29346, 1138, 28944, 13, 13, 29010, 29697, 29769, 29332, 29120, 28924, 29333, 30574, 28518, 29024, 29293,
        28924, 29279, 29954, 29818, 29346, 28914, 31076, 31222, 28944, 29024, 29293, 29298, 29350, 28998, 29745,
        29150, 28944, 29353, 28969, 29150, 29333, 30574, 31076, 31222, 28914, 29046, 29377, 28944, 29353, 29482,
        29150, 29405, 29333, 30574, 30193, 31222, 28914, 29584, 29195, 29063, 28944, 13, 13, 29709, 29024, 29293,
        29598, 29046, 29003, 28835, 29818, 29346, 31076, 31222, 28838, 28944, 13, 13, 29248, 29163, 28998, 29188,
        29329, 29293, 29122, 29192, 29003, 29052, 28963, 29160, 29533, 29992, 28914, 9986, 29293, 29122, 28944,
        29248, 29697, 29769, 29441, 29010, 28789, 1538, 28767, 29352, 29555, 28991, 28944, 13, 13, 30021, 30485,
        29946, 29293, 28994, 13940, 28832, 13, 31137, 29769, 13, 13, 260, 29817, 31625, 28914, 28991, 30050, 31466,
        30206, 29293, 31298, 29443, 29490, 29737, 29401, 29150, 28914, 28969, 29237, 29062, 28924, 29333, 30574,
        29019, 29011, 233, 162, 159, 29041, 31298, 29443, 233, 164, 143, 29041, 30117, 233, 162, 159, 29041, 29179,
        30361, 233, 164, 143, 29414, 28944, 13, 260, 29292, 29824, 29638, 232, 166, 182, 30327, 29395, 29131, 30537,
        30635, 233, 185, 133, 29990, 29052, 29216, 28944, 13, 260, 29052, 29216, 232, 164, 148, 29733, 29087, 29120,
        236, 160, 163, 30402, 29722, 31915, 29186, 9854, 28743, 28733, 28740, 28734, 28734, 29185, 29355, 28740,
        28734, 29824, 29181, 29733, 29131, 28784, 29824, 31279, 236, 160, 172, 28914, 29374, 29181, 29722, 31915,
        29186, 9854, 28743, 28733, 28740, 28740, 28734, 29185, 28944, 13, 260, 30537, 30635, 233, 185, 133, 29990,
        29216, 29541, 29003, 28994, 28988, 236, 151, 139, 236, 149, 165, 29041, 232, 150, 148, 29762, 30258, 29395,
        29041, 29762, 233, 182, 192, 29917, 29395, 29355, 236, 150, 175, 28944, 13, 260, 233, 167, 136, 29169,
        29052, 30197, 29355, 28988, 30197, 233, 140, 185, 29427, 28944, 13, 260, 30640, 28963, 29160, 29490, 31926,
        29355, 29397, 29703, 30082, 29163, 28944, 13, 260, 29252, 29234, 29234, 29338, 29154, 28963, 29542, 29293,
        28944, 13, 13, 29218, 29612, 13, 13, 260, 30108, 28995, 30908, 29169, 28914, 232, 164, 148, 29733, 233, 185,
        133, 29990, 236, 150, 160, 30537, 30635, 28944, 13, 260, 30627, 29129, 233, 167, 136, 29169, 29231, 29312,
        28924, 29082, 30468, 30401, 30852, 28944, 13, 13, 31076, 31222, 13, 13, 260, 30236, 29184, 28782, 28770,
        232, 145, 155, 30752, 28766, 28750, 28734, 28723, 28783, 28787, 30193, 31222, 13, 260, 30330, 29184, 28782,
        28740, 232, 145, 155, 30752, 28766, 28750, 28734, 28723, 28734, 28783, 30193, 31222, 13, 260, 29366, 29184,
        28783, 28734, 232, 145, 155, 30752, 28766, 28770, 28740, 28723, 28782, 28734, 30193, 31222, 13, 260, 30635,
        233, 167, 136, 29366, 29184, 28781, 28781, 232, 145, 155, 30752, 28766, 28740, 28787, 28723, 28770, 28750,
        30193, 31222, 13, 260, 30635, 233, 167, 136, 30330, 29184, 28781, 28740, 232, 145, 155, 30752, 28766, 28740,
        28784, 28723, 28740, 28781, 30193, 31222, 13, 13, 29216, 29541, 13, 13, 260, 30769, 29146, 29561, 29355,
        31483, 29146, 29561, 30787, 30908, 29216, 29541, 28944, 13, 260, 29745, 29824, 30635, 233, 167, 136, 233,
        182, 164, 233, 181, 174, 29385, 29184, 29052, 29216, 28994, 28991, 29414, 29186, 28740, 28723, 28783, 234,
        166, 136, 28748, 29831, 29082, 30193, 31076, 29185, 29355, 29366, 29186, 28750, 28723, 28783, 234, 166, 136,
        28748, 29831, 29082, 30193, 31076, 29185, 28944, 13, 260, 29375, 233, 140, 185, 29427, 29355, 28783, 28995,
        29147, 29021, 7903, 233, 140, 185, 29427, 28944, 13, 13, 31239, 29733, 13, 29638, 232, 166, 182, 30537,
        30635, 31062, 29129, 29011, 13, 13, 260, 29220, 29261, 30854, 30404, 7824, 28784, 28748, 7824, 28784, 28784,
        233, 185, 133, 29990, 28914, 236, 150, 187, 236, 150, 160, 28944, 13, 260, 29638, 232, 166, 182, 232, 145,
        157, 29184, 28994, 28740, 28734, 31331, 30752, 28944, 13, 260, 30635, 233, 167, 136, 13, 2287, 15051, 28770,
        28784, 233, 182, 164, 233, 181, 174, 13, 13, 29493, 29818, 29453, 13, 13, 260, 29462, 29050, 29819, 13,
        13940, 28832, 13, 733, 28748, 16289, 28793, 523, 1538, 28767, 13, 28789, 28716, 28750, 28767, 29818, 29346,
        29697, 29769, 700, 28716, 28750, 28767, 13, 28789, 28720, 28767, 29242, 29550, 28914, 28991, 30050, 31466,
        30206, 29293, 31298, 29443, 29490, 29737, 29401, 29150, 28971, 28518, 29764, 29408, 30170, 30176, 29131,
        29817, 30740, 28914, 29818, 29346, 28924, 29333, 30574, 29019, 29011, 233, 162, 159, 29041, 31298, 29443,
        233, 164, 143, 29041, 30117, 233, 162, 159, 29041, 29179, 30361, 233, 164, 143, 29414, 28944, 29176, 29904,
        29490, 29737, 29401, 29150, 30398, 28963, 29292, 29824, 29638, 232, 166, 182, 30327, 29395, 29131, 30537,
        30635, 233, 185, 133, 29990, 29052, 29216, 28924, 29154, 29928, 29550, 29250, 29058, 31310, 29785, 30640,
        29298, 30344, 29824, 30082, 29960, 28944, 700, 28720, 28767, 13, 28789, 28720, 28767, 29242, 29550, 28914,
        29818, 29346, 29751, 29428, 29569, 29745, 29824, 29722, 31915, 29082, 29122, 28994, 9854, 28743, 28733,
        28740, 28734, 28734, 29186, 232, 164, 148, 29733, 29087, 29120, 236, 160, 163, 30402, 29722, 31915, 29185,
        29131, 9854, 28743, 28733, 28740, 28740, 28734, 29186, 29374, 29181, 29722, 31915, 28924, 29333, 30574,
        28784, 29824, 31279, 236, 160, 172, 29131, 28740, 28734, 29824, 29181, 29733, 29185, 28944, 29242, 29550,
        29279, 29954, 28914, 30537, 30635, 233, 185, 133, 29990, 29216, 29541, 29003, 28988, 236, 151, 139, 236,
        149, 165, 29041, 232, 150, 148, 29762, 30258, 29395, 29041, 29762, 233, 182, 192, 29917, 29395, 29355, 236,
        150, 175, 28944, 700, 28720, 28767, 13, 28789, 28720, 28767, 29242, 29550, 28914, 29818, 29346, 30398,
        28963, 30108, 28995, 30908, 29169, 28914, 232, 164, 148, 29733, 233, 185, 133, 29990, 29131, 236, 150, 160,
        30537, 30635, 28924, 29052, 29074, 29082, 30468, 30401, 30852, 29231, 29312, 28944, 29216, 29541, 29333,
        30574, 30769, 29146, 29561, 29355, 31483, 29146, 29561, 30787, 30908, 29041, 29745, 29824, 30635, 233, 167,
        136, 233, 182, 164, 233, 181, 174, 29385, 29184, 29186, 28991, 29414, 29131, 29366, 29185, 29074, 29965,
        29375, 233, 140, 185, 29427, 29355, 28783, 28995, 29147, 29021, 7903, 233, 140, 185, 29427, 28944, 700,
        28720, 28767, 13, 28789, 28720, 28767, 29350, 29818, 29346, 30640, 28963, 29160, 29490, 31926, 29355, 29397,
        29703, 30082, 29163, 28924, 29457, 29252, 29234, 29234, 29338, 29154, 28963, 29542, 29293, 28944, 700,
        28720, 28767, 13, 700, 1538, 28767, 13, 13, 28789, 28716, 28770, 28767, 29818, 29346, 31076, 31222, 700,
        28716, 28770, 28767, 13, 13, 28789, 2615, 28767, 13, 523, 434, 28767, 13, 523, 362, 28767, 31076, 31222,
        29046, 29377, 700, 362, 28767, 13, 523, 362, 28767, 30193, 31222, 29584, 29195, 29063, 700, 362, 28767, 13,
        1867, 434, 28767, 13, 523, 434, 28767, 13, 523, 2447, 28767, 30236, 29184, 700, 2447, 28767, 13, 523, 2447,
        28767, 28782, 28770, 232, 145, 155, 30752, 28766, 28750, 28734, 28723, 28783, 28787, 30193, 31222, 700,
        2447, 28767, 13, 1867, 434, 28767, 13, 523, 434, 28767, 13, 523, 2447, 28767, 30330, 29184, 700, 2447,
        28767, 13, 523, 2447, 28767, 28782, 28740, 232, 145, 155, 30752, 28766, 28750, 28734, 28723, 28734, 28783,
        30193, 31222, 700, 2447, 28767, 13, 1867, 434, 28767, 13, 523, 434, 28767, 13, 523, 2447, 28767, 29366,
        29184, 700, 2447, 28767, 13, 523, 2447, 28767, 28783, 28734, 232, 145, 155, 30752, 28766, 28770, 28740,
        28723, 28782, 28734, 30193, 31222, 700, 2447, 28767, 13, 1867, 434, 28767, 13, 523, 434, 28767, 13, 523,
        2447, 28767, 30635, 233, 167, 136, 29366, 29184, 700, 2447, 28767, 13, 523, 2447, 28767, 28781, 28781, 232,
        145, 155, 30752, 28766, 28740, 28787, 28723, 28770, 28750, 30193, 31222, 700, 2447, 28767, 13, 1867, 434,
        28767, 13, 523, 434, 28767, 13, 523, 2447, 28767, 30635, 233, 167, 136, 30330, 29184, 700, 2447, 28767, 13,
        523, 2447, 28767, 28781, 28740, 232, 145, 155, 30752, 28766, 28740, 28784, 28723, 28740, 28781, 30193,
        31222, 700, 2447, 28767, 13, 1867, 434, 28767, 13, 700, 2615, 28767, 28705],
    'total_duration': 306253687503,
    'load_duration': 10221841951,
    'prompt_eval_count': 761,
    'prompt_eval_duration': 103594461000,
    'eval_count': 611,
    'eval_duration': 192453585000
}

'''