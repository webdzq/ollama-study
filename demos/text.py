
# 实现文本对话
'''
# pip install ollama
# ollama run llama3.2
'''

import ollama


# 输出文本

def ollama_image_caption(msg):
    client = ollama.Client(host='http://localhost:11434')
    # 将图片转换为 base64 编码
    # base64_image = image_to_base64(image_path)
    # 设置提示语，引导模型对图片进行描述
    prompt = msg or "根据图写一篇200字的简体中文作文："
    response = client.generate(
       model= "llama3.2",
  prompt= msg or "hello world" )
    return response
# 调用
# caption = ollama_image_caption('作业帮')
caption = ollama_image_caption('元宵节')

print(caption)

'''
[Running] python -u "/Users/apple/github/ollama-study/demos/text.py"
输出结果：

model='llama3.2' 
created_at='2025-02-12T05:40:08.036832Z' 
done=True 
done_reason='stop' 
total_duration=23310733782
load_duration=3914354048
prompt_eval_count=29 
prompt_eval_duration=1451000000 
eval_count=292 
eval_duration=17936000000 
response='元宵节是中国传统的节日之一，通常在农历二月二十一这一天 Celebrated.它是一种非常有趣的节日，人们会在这天穿着假面和 Costume, 并进行各种游戏、竞技活动和社交聚会。\n\n这里是关于元宵节的一些常见知识：\n\n1. **元宵节的起源**：元宵节的起源可以追溯到唐朝（618-907年），它是为了庆祝过往的明王朝（960-1279年）和金朝（1210-1368年）的历史。\n2. **假面和 Costume**：人们会在这天穿着假面和 Costume, 以表达自己身份和情感。这些假面可以非常复杂，甚至有自己的故事和意义。\n3. **游戏和竞技活动**：元宵节上非常有趣的游戏和竞技活动，例如：打扑克牌、踢足球、打羽毛球等。\n4. **社交聚会**：人们也会在这天聚会朋友家中或参加大型节日活动，如舞会等。\n\n如果你有机会去参与元宵节的庆祝活动，那么一定要尽力享受这个充满乐趣和生动节日！' 
context=[128006, 9125, 128007, 271, 38766, 1303, 33025, 2696, 25, 6790, 220, 2366, 18, 271, 128009, 128006, 882, 128007, 271, 24186, 8676, 113, 56602, 128009, 128006, 78191, 128007, 271, 24186, 8676, 113, 56602, 21043, 59795, 42783, 55758, 9554, 56602, 9080, 114554, 3922, 117032, 19000, 107019, 82302, 41920, 9953, 110446, 15120, 113418, 36827, 33292, 660, 13, 103282, 107226, 87502, 108008, 19361, 110999, 9554, 56602, 9080, 3922, 127198, 38093, 19000, 44388, 36827, 108669, 100815, 107099, 28190, 34208, 64789, 11, 127098, 72917, 120288, 105745, 5486, 108951, 83301, 108726, 34208, 61337, 39209, 111200, 38093, 3490, 107599, 21043, 111912, 24186, 8676, 113, 56602, 105067, 98184, 40053, 90070, 116658, 49543, 16, 13, 3146, 24186, 8676, 113, 56602, 9554, 72718, 39084, 334, 5232, 24186, 8676, 113, 56602, 9554, 72718, 39084, 74770, 104862, 36117, 107, 28037, 112609, 103293, 10110, 21985, 12, 23505, 8107, 49372, 103282, 21043, 109002, 110736, 114166, 39282, 104198, 9554, 31958, 101538, 103293, 10110, 16415, 12, 6804, 24, 8107, 7705, 34208, 35330, 103293, 10110, 7994, 15, 12, 9795, 23, 8107, 125305, 113691, 9174, 17, 13, 3146, 107099, 28190, 34208, 64789, 334, 5232, 127198, 38093, 19000, 44388, 36827, 108669, 100815, 107099, 28190, 34208, 64789, 11, 106111, 21405, 94588, 102099, 124176, 34208, 40474, 99750, 1811, 108787, 107099, 28190, 74770, 108008, 59464, 114223, 3922, 115550, 19361, 107924, 117625, 34208, 126189, 9174, 18, 13, 3146, 105745, 34208, 108951, 83301, 108726, 334, 5232, 24186, 8676, 113, 56602, 17905, 108008, 19361, 110999, 9554, 105745, 34208, 108951, 83301, 108726, 3922, 78657, 5232, 76537, 15355, 239, 101545, 104241, 5486, 111930, 95, 117366, 5486, 76537, 111555, 105811, 79059, 50667, 9174, 19, 13, 3146, 61337, 39209, 111200, 38093, 334, 5232, 127198, 75863, 38093, 19000, 44388, 36827, 111200, 38093, 111766, 46729, 16325, 58291, 110284, 27384, 25287, 56602, 9080, 108726, 116051, 107875, 38093, 50667, 3490, 63344, 57668, 19361, 126490, 86436, 124080, 24186, 8676, 113, 56602, 9554, 110736, 114166, 108726, 106169, 82696, 111419, 31634, 107542, 48634, 72843, 101682, 103624, 105843, 105483, 102264, 110999, 34208, 21990, 28833, 56602, 9080, 6447]

'''
